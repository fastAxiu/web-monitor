如果要问稳定性的反义词是什么，我们第一时间会想到的是不稳定、出错。所以，这里讲的稳定性主要是指前端页面的JS 错误。JS 错误需要通过多种方式监听，这一篇主要聚焦的点不在于如何收集JS 错误，而在于应该收集什么相关指标，以及如何度量。

我们可以通过监控SDK 收集上报JS 报错的次数、出错率、影响用户数量、出错设备等相关信息。如果要用一个指标来描述一个产品的稳定性情况，这个指标应该怎么选，或者怎么组合呢？

选项一，我们可以使用JS 报错次数，但是这会出现一个问题，vue、angular 等现代前端框架大多进行了数据双向绑定，网站在运行过程中框架会频繁触发变更检测，如果html 中设置的变量读取报错，会在短时间内产生大量JS 错误，1分钟之内可能就产生上千条，但是用户有可能完全感知不到。这就会造成指标的恶化程度跟影响用户程度失配的问题。

选项二，我们可以使用出错率，出错率 = 出错的次数 / 总次数。这里的次数，可以指页面刷新的加载次数，也可以指PV 数。单页应用一次刷新会对应若干次PV 切换，也就对应着若干个页面，所以我认为使用PV 计算更合理。算完了回头看一下这个指标，没有什么问题，不会出现个别用户导致指标爆炸增长的情况。

选项三，我们在描述一个问题的严重程度的时候，往往会考虑一个因素，影响用户数。比如说，华为云在给线上事故定级的时候，就会考虑影响到多少个用户，以及影响到多少个vip 用户。那么，我们不妨使用JS 错误影响用户占比这个指标里描述页面稳定性，是不是也挺合理。不过，如果使用这个指标的话，一个用户访问到10 个报错的页面，和访问到1 个报错的页面，结果是一样的。

选项四，鉴于选项三描述的问题，我们是不是可以将出错率和影响用户占比结合考虑，出错率 + 出错用户占比，等于产品的稳定性情况，数值越大，表示稳定性越差。既能解决影响用户数的问题，又能解决一个用户多个页面影响叠加的问题。

如何收集上报JS 错误：https://www.webfunny.cn/blog/post/33