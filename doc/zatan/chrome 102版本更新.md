【Chrome 102版本控台更新，JS错误监听代码要忙起来了】

当你在浏览器F12 的Console 中输入Math，还没有回车的时候，在你输入命令的下方，Math这个对象就已经显示出来了，只不过此时是灰色字体显示，当你按下回车的时候，这个对象会被真正打印出来。我们日常在Console 中输入js 代码进行简单调试的时候也会遇到类似的场景，为什么还没回车，就已经看到了调试结果？这个问题其实我从来没有想过，直到今天遇到了一个问题。

几天前，Chrome 发布了102 稳定版，其中的一个特性是控制台更新，更新内容为：控制台中脚本评估期间的错误现在会生成适当的错误事件，这些事件会触发处理程序并作为窗口对象上的事件window.onerror 进行调度。（参考：）

这个更新造成的结果就是：web 端监控工具捕捉到的无意义JS 错误会大量增加。为什么这么说，我们展开分析一下。

上面有提到，我们在Console 中输入js 代码的时候，还没有按回车，执行结果就已经显示在下方了，之所以会这样，是因为浏览器已经把我们输入的命令执行了。详细原因可参考：。

那么问题来了，浏览器知道我们什么时候输入完毕了，就去执行代码吗？不知道，所以它会做轮询执行，只要我们在输入，它隔一会，就会把我们输入的内容拿过来执行一下子。这样就会引入一个问题，假如我们本来想要输入console.log('geek time')，但是在输入到console.log('geek 的时候，浏览器就把我们的代码拿过来执行了，这个时候会发生什么？会报错。

在Chrome 的102 版本之前，出现这种错误，浏览器会默默忍受，但是到了102 版本之后，每次发生这种问题，它都会创建一个错误抛出来，这个错误不会显示在Console 中，但是可以被window.onerror 和window.addEventListener('error') 监听到，而大部分监控工具对JS 错误的监听都是通过这两个事件去做的。除了上述说的语法问题导致的报错外，每次我们手动在Console 中输入命令的时候，浏览器也会产生一个错误抛出来，EvalError: Possible side-effect in debug-evaluate，大概意思是，你这么搞，可能会产生副作用。
